{"version":3,"file":"bundle-artist_detail.js","mappings":";;;;;;;;;;;;;;AAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;UCNA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WCtBA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;;;;;WCAA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D;;;;;;;;;;;;ACN+C;;AAE/C;AACA;AACA;AACA,OAAO,6DAAW;AAClB;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,0BAA0B,SAAS;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA,kCAAkC,SAAS;AAC3C;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA,wDAAwD,cAAc;AACtE,6BAA6B;AAC7B;AACA,iBAAiB;;AAEjB,UAAU;AACV;AACA;AACA,KAAK;AACL;AACA","sources":["webpack://programming-5/./src/main/js/modules/csrf.js","webpack://programming-5/webpack/bootstrap","webpack://programming-5/webpack/runtime/define property getters","webpack://programming-5/webpack/runtime/hasOwnProperty shorthand","webpack://programming-5/webpack/runtime/make namespace object","webpack://programming-5/./src/main/js/artist_detail.js"],"sourcesContent":["export function getCsrfInfo() {\n    const csrfToken = document.querySelector(\"meta[name=_csrf]\").content;\n    const csrfHeader = document.querySelector(\"meta[name=_csrf_header]\").content;\n    return {\n        [csrfHeader]: csrfToken\n    }\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { getCsrfInfo } from './modules/csrf.js'\n\nconst headers = {\n    Accept: \"application/json\",\n    \"Content-Type\": \"application/json\",\n    ...getCsrfInfo()\n};\n\nconst editButton = document.getElementById(\"editButton\");\nconst saveButton = document.getElementById(\"saveButton\");\n\neditButton.addEventListener(\"click\", openEditorArtist)\nsaveButton.addEventListener(\"click\", updateArtist)\n\nfunction openEditorArtist() {\n    // Name\n    document.getElementById(\"name\").contentEditable = \"true\";\n\n    // Birthdate\n    const currentBirthdate = document.getElementById(\"currentBirthdate\");\n    const age = document.getElementById(\"age\");\n    age.innerHTML = \"<input type='date' value='\" + currentBirthdate.value + \"'/>\"\n\n    // HitSong\n    document.getElementById(\"hitSong\").contentEditable = \"true\";\n\n    // Nationality\n    // const countries = document.getElementById(\"countries\");\n    const nationality = document.getElementById(\"nationality\");\n    let tableDataNationality = document.createElement(\"td\")\n    tableDataNationality.setAttribute(\"id\", \"nationality\")\n    let dropdownNationality = document.createElement(\"select\")\n    for (let country of countries){\n        let opt = document.createElement('option');\n        opt.value = country;\n        opt.innerHTML = country;\n        dropdownNationality.appendChild(opt);\n    }\n    tableDataNationality.appendChild(dropdownNationality);\n    nationality.parentNode.replaceChild(tableDataNationality, nationality);\n\n    // Is One Person Act\n    const isOnePersonAct = document.getElementById(\"isOnePersonAct\");\n    let tableDataIsOnePersonAct = document.createElement(\"td\")\n    tableDataIsOnePersonAct.setAttribute(\"id\", \"isOnePersonAct\")\n    let dropdownTrueFalse = document.createElement(\"select\")\n    let isTrue = new Option('True','true');\n    dropdownTrueFalse.add(isTrue, undefined)\n\n    let isFalse = new Option('False','false');\n    dropdownTrueFalse.add(isFalse, undefined)\n\n    tableDataIsOnePersonAct.appendChild(dropdownTrueFalse);\n    isOnePersonAct.parentNode.replaceChild(tableDataIsOnePersonAct, isOnePersonAct);\n}\n\nfunction updateArtist(event) {\n    const clickedButton = event.target;\n    const name = document.getElementById(\"name\");\n    const birthDate = document.getElementById(\"age\");\n    const hitSong = document.getElementById(\"hitSong\");\n    const nationality = document.getElementById(\"nationality\");\n    const isOnePersonAct = document.getElementById(\"isOnePersonAct\");\n\n    let newAge = 999;\n\n    const inputElement = clickedButton\n        .previousElementSibling\n        .previousElementSibling\n        .previousElementSibling\n        .previousElementSibling;\n\n    const artistId = parseInt(inputElement.value);\n\n    fetch(`/api/artists/${artistId}`, {\n        method: \"PUT\",\n        headers,\n        body: JSON.stringify({\n            \"id\": artistId,\n            \"name\": name.innerHTML,\n            \"birthDate\": birthDate.firstElementChild.value,\n            \"hitSong\": hitSong.innerHTML,\n            \"isOnePersonAct\": isOnePersonAct.firstElementChild.value,\n            \"country\": nationality.firstElementChild.value\n        })\n    }).then(response => {\n        if (response.status === 200) {\n            fetch(`/api/artists/${artistId}`, {\n                method: 'GET',\n                headers\n            })\n                .then(response => {\n                    if (response.status === 200) {\n                        response.json().then(artist => {\n                            newAge = artist.age;\n                            name.contentEditable = \"false\";\n                            birthDate.innerHTML = '' + newAge;\n                            hitSong.contentEditable = \"false\";\n                            nationality.innerHTML = '' + nationality.firstElementChild.value;\n                            isOnePersonAct.innerHTML = '' +\n                                isOnePersonAct.firstElementChild.value.charAt(0).toUpperCase() + isOnePersonAct.firstElementChild.value.slice(1);\n                        })\n                            .catch(error => {\n                                alert(`Received error ${error.message}`);\n                            });\n                    }\n                })\n\n        } else {\n            alert(response.statusMessage);\n        }\n    })\n        .catch(error => alert(error.message));\n}\n\n"],"names":[],"sourceRoot":""}